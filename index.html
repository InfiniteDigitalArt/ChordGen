<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ChordGen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Load CSS -->
    <link rel="stylesheet" href="chordgen.css">

    <!-- Tone.js + MIDI Writer -->
    <script src="https://cdn.jsdelivr.net/npm/midi-writer-js/browser/midiwriter.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
</head>

<body>

<!-- Toolbar -->
<div class="toolbar">

    <!-- Left spacer (balances layout) -->
    <div class="toolbar-left"></div>

    <!-- Centered toolbar content -->
    <div class="toolbar-center">
        <div class="toolbar-controls">

            <!-- Logo + Title -->
            <img src="https://www.rewiredrecords.co.uk/cdn/shop/files/RR-Wide-Blue-2.png?v=1675293028"
                 alt="Rewired Records Logo"
                 class="rr-logo">

            <span class="app-title">ChordGen</span>

            <!-- Simple / Advanced -->
            <div class="mode-toggle">
                <label class="toggle-label">Simple</label>
                <label class="switch">
                    <input type="checkbox" id="modeToggle">
                    <span class="slider"></span>
                </label>
                <label class="toggle-label">Advanced</label>
            </div>

            <!-- 4 / 8 chords -->
            <div class="count-toggle">
                <label class="toggle-label">4 Chords</label>
                <label class="switch">
                    <input type="checkbox" id="countToggle">
                    <span class="slider"></span>
                </label>
                <label class="toggle-label">8 Chords</label>
            </div>

            <button id="exportBtn" class="btn-standard">Export MIDI</button>

        </div>
    </div>

    <!-- Right spacer (balances layout) -->
    <div class="toolbar-right"></div>

</div>

<!-- Main -->
<div class="container">

    <div class="transport-bar">



        <div class="rhythm-control">

            <select id="instrumentSelector" class="scale-select">
                <option value="piano">Piano</option>
                <option value="strings">Strings</option>
            </select>


            <label for="scaleSelector" class="toggle-label">Scale</label>
            <select id="scaleSelector" class="scale-select">
                <option value="random">Random</option>

                <!-- Major keys -->
                <option value="C major">C major</option>
                <option value="C# major">C♯ / D♭ major</option>
                <option value="D major">D major</option>
                <option value="D# major">D♯ / E♭ major</option>
                <option value="E major">E major</option>
                <option value="F major">F major</option>
                <option value="F# major">F♯ / G♭ major</option>
                <option value="G major">G major</option>
                <option value="G# major">G♯ / A♭ major</option>
                <option value="A major">A major</option>
                <option value="A# major">A♯ / B♭ major</option>
                <option value="B major">B major</option>

                <!-- Minor keys -->
                <option value="C minor">C minor</option>
                <option value="C# minor">C♯ / D♭ minor</option>
                <option value="D minor">D minor</option>
                <option value="D# minor">D♯ / E♭ minor</option>
                <option value="E minor">E minor</option>
                <option value="F minor">F minor</option>
                <option value="F# minor">F♯ / G♭ minor</option>
                <option value="G minor">G minor</option>
                <option value="G# minor">G♯ / A♭ minor</option>
                <option value="A minor">A minor</option>
                <option value="A# minor">A♯ / B♭ minor</option>
                <option value="B minor">B minor</option>
            </select>


            <label for="rhythmSelector" class="toggle-label">  Rhythm</label>
            <select id="rhythmSelector" class="rhythm-select">
                <option value="none">None</option>
                <option value="classic">Classic</option>
                <option value="bouncy">Bouncy</option>
                <option value="house">House</option>
                <option value="dance">Dance</option>
                <option value="raver">Raver</option>
            </select>
        </div>




        <button id="generateBtn" class="btn-standard">
            <svg class="btn-icon" viewBox="0 0 118.91 122.88">
                <path d="M6.41,23.43l49.53,20.15c1.57,0.64,4.17,1.04,5.74,0.4l52.42-21.41c1.57-0.64-0.02-3.49-1.62-4.05L59.62,0
                c-0.4-0.14-10.33,3.48-11.72,3.97L4.79,19.38C3.12,19.97,4.26,22.55,6.41,23.43z M116.87,94.34l-51.73,28.06
                c-1.49,0.81-3.56,0.69-3.56-1.01l-0.01-66.03c0-1.7,0.14-3.36,1.7-4.03l51.92-22.12c1.56-0.66,3.73-0.07,3.72,1.62l-0.34,59.48
                C118.56,92,118.36,93.53,116.87,94.34z M104.99,71.09c3.52,1.5,4.55,6.77,2.28,11.78c-2.26,5-6.96,7.84-10.48,6.34
                c-3.52-1.5-4.55-6.77-2.28-11.78C96.78,72.43,101.47,69.59,104.99,71.09z M86.22,57.28c3.65,1.55,4.7,7.01,2.36,12.19
                c-2.34,5.18-7.2,8.12-10.85,6.57c-3.65-1.55-4.7-7.01-2.36-12.19C77.71,58.66,82.57,55.72,86.22,57.28z M1.81,93.89l51.26,27.75
                c1.49,0.81,3.56,0.69,3.56-1.01l0.01-65.42c0-1.7-0.14-3.36-1.7-4.03L3.72,29.22C2.16,28.55,0,29.15,0,30.85l0.11,59.02
                C0.11,91.56,0.32,93.08,1.81,93.89z M6.91,75.74c3.21-2.04,7.99,0.29,10.66,5.2s2.24,10.56-0.97,12.6c-3.21,2.04-7.99-0.29-10.66-5.2
                C3.27,83.42,3.7,77.78,6.91,75.74z M22.06,64.37c3.4-2.06,8.45,0.29,11.28,5.26c2.83,4.97,2.38,10.67-1.02,12.73
                c-3.4,2.06-8.45-0.29-11.28-5.26C18.2,72.14,18.66,66.44,22.06,64.37z M38.12,52.37c3.42-2.07,8.51,0.29,11.36,5.26
                c2.85,4.97,2.39,10.68-1.03,12.74c-3.42,2.07-8.51-0.29-11.36-5.26C34.24,60.14,34.7,54.44,38.12,52.37z M59.16,15.48
                c6.04,0,10.93,2.34,10.93,5.22c0,2.88-4.89,5.22-10.93,5.22c-6.03,0-10.93-2.34-10.93-5.22C48.23,17.82,53.13,15.48,59.16,15.48z"/>
            </svg>

            Generate
        </button>

        <button id="playBtn" class="transport-btn btn-standard">
            <svg class="btn-icon" viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z" />
            </svg>
            Play
        </button>

        <button id="stopBtn" class="transport-btn btn-standard">
            <svg class="btn-icon" viewBox="0 0 24 24">
                <path d="M6 6h12v12H6z" />
            </svg>
            Stop
        </button>

        <button id="loopBtn" class="transport-btn btn-standard">
            <svg class="btn-icon" viewBox="0 0 118 123">
                <path d="M16.08,59.26A8,8,0,0,1,0,59.26a59,59,0,0,1,97.13-45V8a8,8,0,1,1,16.08,0V33.35a8,8,0,0,1-8,8L80.82,43.62a8,8,0,1,1-1.44-15.95l8-.73A43,43,0,0,0,16.08,59.26Zm22.77,19.6a8,8,0,0,1,1.44,16l-10.08.91A42.95,42.95,0,0,0,102,63.86a8,8,0,0,1,16.08,0A59,59,0,0,1,22.3,110v4.18a8,8,0,0,1-16.08,0V89.14h0a8,8,0,0,1,7.29-8l25.31-2.3Z"/>
            </svg>

            Loop
        </button>



        <div class="tempo-control">
            <label for="tempoSlider">Tempo</label>
            <input type="range" id="tempoSlider" min="100" max="200" value="140">
            <span id="tempoValue">140 BPM</span>
        </div>

                    <!-- Buttons -->
        
        

    </div>


    <div id="chordContainer" class="chords"></div>

    <canvas id="pianoRoll"></canvas>

    <div id="statusText" class="status">Loading...</div>
    <div id="progressionText" class="status"></div>

    <div class="info-text">
    Generate and export chord progression MIDIs.<br>
    Click a chord name to select a new one, drag to rearrange.
    </div>
    <div id="audioDropZone">
    Drag & drop audio here (WAV / MP3)
    </div>


</div>

<!-- Load JS -->

<script src="rhythm.js"></script>
<script src="chordgen.js"></script>



</body>
</html>
